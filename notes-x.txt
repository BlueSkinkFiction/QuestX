The XXX Extension


So I have written a few adult games for Quest 5, and had kind of cheated be not having a command line, or very much restricting what the player can actually do. What I have aspired to is parser hgame when the player can do _anything_. So I started to write a library to handle that. Then I heard about Quest 6. It has some big advantages, as described [here](https://github.com/ThePix/QuestJS/wiki). The only down side really is no editor. And  as I was writing a library, I was not using an editor anyway.

So this is my QuestX library, a bunch of extensions to Quest 6 supporting adult games.

This will NOT include a whole bunch of lurid sex scenes - that is for the author to write. What it does is give an infrastructure, making it easy for an author to create rather than code.





New Commands
------------

Added commands (all should be capable of being prefixed by an NPC name to use as a command)

(KNEEL|BEND OVER|CRAWL|SIT|LIE BACK|LIE FACE DOWN)
(BEND OVER|STRADLE) <furniture>
(GROPE|FINGER|LICK|KISS|SMACK|SUCK) <character>'s (LEFT|RIGHT)? <bodypart>
(GROPE|FINGER|LICK|KISS|SMACK|SUCK) MY (LEFT|RIGHT)? <bodypart>

TAKE OFF MY <garment> [b]
TAKE MY <garment> OFF [b]

REMOVE <character>'s <garment>
TAKE OFF <character>'s <garment>
TAKE <character>'s <garment> OFF

UNDRESS <character>
CHAIN <character>
CHAIN <character> TO <device>

Note that several commands use 's. This is notr optrional, as Quest uses 's to separate the different terms. This means you may run into problems with items that have 's is their name.



# NPCs and the Player

Use the ACTOR template to create NPCs and the player object. For the player, you need to give two Booleans, the first set to `true` if the player is female or `false` if male. The second attribute must be `true`. For NPCs, just set the first Boolean to indicate the sex of the NPC.

This example creates a female player object.

```
createItem("me",
  ACTOR(true, true), {
    loc:"lounge", 
    regex:/^me|myself|player$/, 
    examine:function() {
      msg("You are wearing {attire}. {ifposture:You are {posture}.}", {tpItem:this});
    },
  }
);
```

### Bodyparts

You can also give your player and NPC unconventional sexual characteristics. This is done by overriding the hasBodyPart function. In this example, laude is a lady-boy:

```
createItem("Claude",
  ACTOR(), {
    loc:"lounge", 
    properName:true,
    examine: "A cool dude... with boobs.",
    hasBodyPart:function(bp) {
      if (typeof bp !== "string") bp = bp.name;
      if (bp === "pussy") return false;
      if (bp.notStd) return false;
      return true;
    },
  }
);
```

The first line of the function allows the function to be sent both the bodypart and its name, so must always be present. You should then have a line for each bodypart the character does _not_ have - in this case just "pussy", but you could have as many lines as required (remember they are in the singular, so "tit" not "tits"). The third line says the character has no non-standard body parts, and the last line says the character has everything else.

Non-standard bodyparts? What is that about? Well, you might have characters with wings, horns or a tail. These are built-in non-standards bodyparts.

```
createItem("Gabriel",
  ACTOR(), {
    loc:"lounge", 
    properName:true,
    examine: "An angel!",
    hasBodyPart:function(bp) {
      if (typeof bp !== "string") bp = bp.name;
      if (bp === "pussy") return false;
      if (bp === "tit") return false;
      if (bp === "wing") return true;
      if (bp.notStd) return false;
      return true;
    },
  }
);
```

Gabriel is a male angel, so not tits or pussy, but we have to "opt-in" for wings as they are non-standard.

### Custom bodyparts

You can create your own bodypart, using the BODYPART template. Suppose you have aliens with a bony crest on their head:

```
createItem("crest", BODY_PART(0, false, /crest|ridge/), {notStd:true});
```

The zero indicates this is a body part the alien has no taboo with people seeing or touching. The `false` indicates it is not something it has two of. The bit between the slashes is the regular expression use to match this object; each alternative is separated by a vertical bar.

Suppose the ridge is erotic; the alien has no problem with it being seen, but very much objects if strangers touch it. We can increase the number, perhaps to 4, and then override `getExposureRating` to return zero when it is just about being seen.

```
createItem("mouth", BODY_PART(3, false, /mouth|lips?/), {
  getExposureRating:function(char) { return 0; }
});
```

There are other options too.


### Overriding functions in NPCs (descriptive)
    
You can override this to give the character a default description for all bodyparts (say "green" for a sexy green alien, like Gamora).

    getDefaultBodyPartAdjective:function() {
      return "green";
    },

You can override this to give a specific body part an adjective. Could also be done dynamically, say to reflect the erection (though that might get done another way at some point).

    bodyPartAdjectives:{
      tit:"pert",
      lowerback:"tattooed",
    },

Set `hasHugeBoobs` to true to give an NPC huge boobs (must have "tit" bodypart).

Set `hasHugeCock` to true to give an NPC a huge cock (must have "cock" bodypart).




### Overriding functions in NPCs (non-descriptive)

You can override this to have an erotic actor have a fetish for a body part. Have it return a number for a recognised body part, or false for anything else.

    getIntimateRating:function(bp_name) {
      return false;
    },


The "willingToExpose" attribute can be used to determine how willing the character is to get his or her kit off. It defaults to 5. A value of 10 will have him happy to undress anywhere. An 8 will have a woman reluctant to take her bra off and refuse to take her panties off in a standard public room.

You can override the "getWillingToExpose" function for more power.







# Garments

Garments are created as normal, but you must use the following slots:

> foot, calf, knee, thigh, hip, buttock, hand, wrist, arm, shoulder, lowerback, upperback, midriff, chest, nipple, cleavage, neck, head, nose, mouth, crotch

For more exotic NPCs, you can also include tail, wing, horn (and any bodypart you have created yourself).

The layers are:

```
1 - jewellery
2 - underwear and swimwear
3 - tights
4 - trousers/slacks/shirts
5 - dress/skirt
6 - warm wear
8 - jacket footwear hat
10 - overcoat
```

For convenience, you can use these templates, which all inherit from WEARABLE. Some take a parameter to allow some variation (and for a dress, you need to specify the slots).

```
Swimwear
BRIEFS
HALTER
SWIMSUIT(int height up the back)
SWIM_SHORTS(Boolean long)

Underwear
THONG
BRA
PANTIES
BOXERS

Footwear
BOOTS(int height)
SHOES

Other
TEE_SHIRT(boolean low-cut)
VEST_TOP(boolean cropped)
BUTTONED_SHIRT(boolean cropped)
SKIRT(int length)
SHORTS(Boolean long)
PANTS
DRESS(slots)
JACKET(int length)
```

You may want to use these but override the values as required. For example, a tee-shirt with the lower part ripped off:

```
createItem("teeshirt_ripped", MADE_OF(materials.cloth), TEE_SHIRT(),
  {
    alias:"ripped tee-shirt",
    examine:"A white tee-shirt, with pretty much all the lower half ripped away.",
    colours:"black;white",
    image:"teeshirt_white",
    slots:["chest", "cleavage", "nipple", "upperback", "shoulder"],
  }
);
```

Or a vest used as underwear:

```
createItem("vest", MADE_OF(materials.cloth), VEST_TOP(),
  {
    examine:"A white vest.",
    layer:3,
  }
);
```


Note that pairs stay together; a pair of shoes in one object. If you take off a shoe, they both come off. 

You can give a garment a "getRevealing" function, returning a value from 0 to 5, if it is revealing. 5 is the same as not wearing it at all, whilst 0 is probably not significant. This could change dynamically, say depending on how wet the character is. Currently this is only used when determining the nudity rating with getExposure.

As a guideline, a woman with willingToExpose of 3 will refuse to go in a very public area in a bikini, will be reluctant with willingToExpose of 4 and happy to do so at 5. At 8 or 9 she will be reluctant in a thong, but at 11 will be happy naked anywhere





Furniture and positions

EROTIC_FURNITURE extends FURNITURE to allow "bend over" and "straddle", in addition to "sitting", "standing" and "reclining".

Characters can also assume positions without furniture:

kneeling
bending over
sitting
lying face down
lying back
on ? hands and knees


Rooms

Give a room a `getPublicRating` to determine how public it feels to an NPC, from 0 for a private room, to 10 for a podium in a busy thoroughfare. It defaults to 5 if absent (but will check the rooms the room is in too).





/*

Suppose these are static, the base values, and range from 0 to 20.

baseToUndress
baseToPerform
baseToBeKinky

They will be modified by arousal, attaction to those present/involved, the public rating of the room, exactly what is to be done or removed

keenToUndress
keenToPerform
keenToBeKinky



fetish

need a propensityTo function, taking a string: "remove", "perform", "kinky", "wear"

should take account of arousal and where character is (how public, how well lit maybe)


Need to track various parameters on the EA
Attraction to a specific character
when they meet, determine a starting attraction based on what the character likes in a sexual partner

Arousal


Give each NPC a set of responses

horrifiedNo
definitelyNo
greatNo
lessNo
flirtyNo
reluctantYes
lessYes
greatYes
standardYes
eagerYes
hellYes

list attribute actionResponses


*/